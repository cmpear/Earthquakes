---
title: "Earthquakes Readme"
output: html_notebook
---

# Earthquakes
<!-- badges: start -->
[![Travis build status](https://travis-ci.com/cmpear/Earthquakes.svg?branch=master)](https://travis-ci.org/cmpear/Earthquakes)
<!-- badges: end -->

This package is built for retrieving, cleaning, analyzing and visualizing earthquake data gathered by the National Oceanic and Atmospheric Administration.  Presenting this package does three things:
# Retrieve and Clean Data
This package has the raw quake data from the NOAA stored as a text file in /inst/ext/quakes.txt; and a cleaned version of the data stored in /data/tremors.rda (there is already a builtin dataset named 'quakes').  This package also includes several functions for cleaning the raw data.
# Create geom_timeline and geom_timeline_labels
This package has two geoms for creating a timeline visualizing the quake data.  It also supports creating several timelines simultaneously by including a y variable in the aesthetics.  The labels geom simply adds labels to a n_max cases from the data (the n_max largest or random).
```{r}
tremors %>% 
  dplyr::filter(YEAR >= 2010 ) %>%
  dplyr::filter(COUNTRY %in% c("JAPAN", "TAIWAN", "PHILIPPINES")) %>%
  dplyr::select(DATE, COUNTRY, LOCATION_NAME, EQ_PRIMARY, DEATHS) %>%
  dplyr::mutate(COUNTRY = as.factor(COUNTRY)) %>%
  ggplot(aes(x = DATE, y = COUNTRY, labels = LOCATION_NAME, size = EQ_PRIMARY, col = DEATHS, n_max = 5)) + Earthquakes::geom_timeline() + Earthquakes:::geom_timeline_label()
```

# Creates a map file for visualizing quake data
This package also includes an interacting mapping function using leaflet for visualizing geospatial quake data.
```{r}
m<-tremors %>%
dplyr::select(COUNTRY, LATITUDE, LONGITUDE, EQ_PRIMARY, DATE, YEAR, DEATHS) %>%
dplyr::filter(COUNTRY %in% c("JAPAN", "TAIWAN", "PHILIPPINES"), YEAR >= 2010) %>%
Earthquakes::eq_map(annot_col = "DATE")
m
```

